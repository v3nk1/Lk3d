dojo.declare("vcc.base.logon",null,{show:function(){ theVccFrame.rowsSetting=theVccFrame.frameSet.getAttribute("rows"); var _1; _1=theVccFrame.rowsSetting.substring(theVccFrame.rowsSetting.lastIndexOf(",")+1); if(_1<400){ theVccFrame.frameSet.setAttribute("rows","24,*,400"); } if(dijit&&dijit.byId("logon.Dialog")){ dijit.byId("logon.Dialog").show(); this.enableSubmitButton(); } },enableSubmitButton:function(){ var _2=dijit.byId("logonSubmit"); if(_2){ _2.setDisabled(false); } },logon:function(_3){ var _4=dijit.byId("logonSubmit"); if(_4){ _4.setDisabled(true); } var _5=dojo.byId("useridinput").value; if(_5){ _5=vccUtils.trimString(_5); if(_5.length==0){ alert(nlsStrings.ALERT_REQUIRE_USERID); this.enableSubmitButton(); return; } }else{ alert(nlsStrings.ALERT_REQUIRE_USERID); this.enableSubmitButton(); return; } var _6=dojo.byId("userpwdinput"); var _7=AJAX.getRootPath()+"LogonServlet"; var _8=new Array(); _8["intranetID"]=_5; if(_6){ _8["password"]=_6.value; } if(_3){ _8["checkTerm"]="true"; }else{ _8["checkTerm"]="false"; } AJAX.post(_7,_8,this.processLogonResult,this.errorHandler); },hide:function(_9){ if(dijit&&dijit.byId("logon.Dialog")){ dijit.byId("logon.Dialog").hide(); if(_9){ if(!theVccFrame.frameSet.noResize){ theVccFrame.frameSet.setAttribute("rows",theVccFrame.rowsSetting); if(theVccFrame.vccFrame.noResize){ theVccFrame.rowsSetting="24,*,250"; } } } } },processLogonResult:function(_a){ if(_a&&_a.getElementsByTagName("term").length>0){ theVccFrame.logon.hide(false); dijit.byId("termofusedialog").show(); }else{ if(_a&&_a.getElementsByTagName("role").length>0){ theVccFrame.logon.hide(true); var _b=commentContent.getUrl(); var _c=commentContent.getSelection(); var _d=commentContent.getPageID(); var _e=_b; if(-1!=_d){ _e+="?pageid="+_d; if(_c){ _e+="&htmlid="+_c.asString(); } } commentContent.setUrl(_e); if(window.top.VCCSubject){ window.top.VCCSubject.notifyLogonObserver(); } if(_a.getElementsByTagName("uid").length>0&&_a.getElementsByTagName("intranetID").length>0&&_a.getElementsByTagName("nickname").length>0){ var _f=_a.getElementsByTagName("uid")[0].firstChild.nodeValue; var _10=_a.getElementsByTagName("intranetID")[0].firstChild.nodeValue; var _11=""; if(_a.getElementsByTagName("nickname")[0].firstChild){ _11=_a.getElementsByTagName("nickname")[0].firstChild.nodeValue; } window.top.SearchFrame.setAccountInfo(_10,_11); window.top.HelpFrame.NavFrame.ViewsFrame.vcc.vccViewFrame.setAccountInfo(_f,_10,_11); } }else{ if(_a&&_a.getElementsByTagName("error").length!=0){ alert(_a.getElementsByTagName("error")[0].firstChild.nodeValue); theVccFrame.logon.enableSubmitButton(); } } } },errorHandler:function(_12,_13){ alert(nlsStrings.ALERT_LOGON_FAIL); this.enableSubmitButton(); }}); 