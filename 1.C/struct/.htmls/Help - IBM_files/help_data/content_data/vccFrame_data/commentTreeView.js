vcc.comment.Comment.prototype.toHTML=function(_1){ var _2=cmtUtil.decodeCommentSpecial(this.text); _2=cmtUtil.processLink(_2,0); var _3; if(""!=this.nickName){ _3=this.nickName; }else{ _3=this.intranetID; if(!isInternalMode){ var _4=_3.indexOf("@"); if(-1!=_4){ _3=_3.substring(0,_4+1); _3=_3.concat("***.**"); } } } var _5=_3.substring(0,20)+(_3.length>=20?"...":""); var _6="<div class='comment_header'>"; _6+="<span class='comment_hide_show_icon'><a href='javascript:void(0)' onClick='commentActions.showOrHideComment(this.parentNode);'> <img name='c_down_"+this.cid+"' onClick='commentActions.showOrHideComment(this.parentNode);' src='images/plus.gif'/><img style='display:none;' name='c_up_"+this.cid+"' onClick='commentActions.showOrHideComment(this.parentNode);' src='images/minus.gif'/></a></span>"; _6+="<a href='javascript:void(0);' class='title_text' onClick='commentActions.showOrHideComment(this);'>"; _6+=this.subject; _6+="</a>"; _6+="<span class='header_info' title=\""+_3+"\"><table><tr><td><a href='javascript:void(0);' class='title_text' onClick='commentActions.showOthersComments(\""+this.uid+"\",\""+this.intranetID+"\",\""+_3+"\");'>"+_5+"</a></td>"; _6+="<td><span class='comment_time'>"+this.time+"</span></td>"; _6+="</tr></table></span></div>"; _6+="<div class='comment_content_action-hidden comment_content_action'>"; _6+="<div class='comment_content"; _6+="'>"+_2+"</div>"; _6+="<div class='comment_action'>"; if((userRight.test(AU.MASK.ADDCOMMENT)&&commentContent.isLatestVersion())||myID=="null"||myID==null){ _6+="<a href='javascript:void(0);' id='reply_label' class='comment_action_hint' onClick='commentActions.reply(\""+myID+"\", \""+encodeURIComponent(this.subject).replace(new RegExp("'","gm"),"%27")+"\", \""+encodeURIComponent(this.htmlID.asString()).replace(new RegExp("'","gm"),"%27")+"\", \""+this.cid+"\"); return false;'>"+nlsStrings.LABEL_REPLY+"</a>"; } if(userRight.test(AU.MASK.ADDCOMMENT)&&commentContent.isLatestVersion()){ if(this.intranetID==myID&&!commentView.hasChildComment(this.cid)){ _6+="<a href='javascript:void(0);' id='delete_label"+this.cid+"' class='comment_action_hint' onClick='commentActions.deleteCommentwithoutChild(\""+this.cid+"\",\""+encodeURIComponent(this.htmlID.asString()).replace(new RegExp("'","gm"),"%27")+"\","+this.pid+"); return false;'>"+nlsStrings.LABEL_DELETE+"</a>"; } } _6+="<a href='javascript:void(0);' id='show_url_label"+this.cid+"' class='comment_action_hint' onClick='commentActions.show_url(\""+encodeURIComponent(this.htmlID.asString()).replace(new RegExp("'","gm"),"%27")+"\", \""+this.cid+"\"); return false'>"+nlsStrings.LABEL_SHOW_URL+"</a>"; if(userRight.test(AU.MASK.COMMENTFILTER)){ _6+="<a href='javascript:void(0);' class='comment_action_hint' onClick='commentActions.deleteComment(\""+this.cid+"\",\""+encodeURIComponent(this.htmlID.asString()).replace(new RegExp("'","gm"),"%27")+"\","+this.pid+"); return false;'>"+nlsStrings.LABEL_DELETE+"</a>"; } if(isInternalMode){ _6+="<span class='comment_action_display'>"+nlsStrings.LABEL_COMMENT_TYPE+"</span>"+"<span id='type_span"+this.cid+"' name='commentType' style='margin-right:10px;'>"+typeList[this.type]+"</span>"; } _6+="<div onClick='commentActions.onfocusUrl(\""+this.cid+"\");' class='comment_action' id='show_url"+this.cid+"' style='font-size:9px;display:none'></div>"; _6+="</div>"; _6+="</div>"; return _6; }; 