dojo.declare("vcc.comment.Util",null,{_commentScroller:new vcc.base.DivScroller("message"),encodeComment:function(_1){ return _1.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"); },decodeComment:function(_2){ return _2.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<"); },decodeCommentSpecial:function(_3){ return _3.replace(/&amp;/ig,"&").replace(/&lt;b&gt;/ig,"<b>").replace(/&lt;i&gt;/ig,"<i>").replace(/&lt;\/b&gt;/ig,"</b>").replace(/&lt;\/i&gt;/ig,"</i>").replace(/&lt;\/a&gt;/ig,"</a>").replace(/\n/g,"<br>"); },scanString:function(_4){ if(_4.indexOf("<")>=0||_4.indexOf(">")>=0||_4.indexOf("\"")>=0){ return false; }else{ return true; } },validateType:function(_5){ if(!_5.isValid()){ alert(nlsStrings.ALERT_INVALID_TYPE); return -1; } return 0; },validateSubject:function(_6,_7){ if(_6.length==0){ alert(nlsStrings.ALERT_ENTER_SUBJECT); return -1; } if(_6.ulength()>_7){ var _8=nlsStrings.ALERT_COMMENT_SUBJECT_TOO_LONG; alert(dojo.string.substitute(_8,{amount:_7})); return -1; } return 0; },validateComment:function(_9,_a){ if(_9.length==0){ alert(nlsStrings.ALERT_BLANK_MESSAGE); return -1; } if(_9.ulength()>_a){ var _b=nlsStrings.ALERT_COMMENT_CONTENT_TOO_LONG; alert(dojo.string.substitute(_b,{amount:_a})); return -1; } return 0; },getElementText:function(_c,_d){ var _e=""; try{ var _f=_c.getElementsByTagName(_d)[0]; if(_f&&_f.firstChild){ _e=_f.firstChild.nodeValue; } } catch(e){ console.dir(e); } return _e; },breakSentence:function(_10){ var _11=""; if(_10){ var _12=0; var _13=0; var _14=_10.length; for(;_12<_14;_12++){ if(_13<60){ _11+=_10.charAt(_12); _13++; }else{ } } } return _11; },scrollComment:function(_15){ this._commentScroller.scrollIntoView(_15); },processLink:function(_16,_17){ var _18=4; var _19=15; linkIndex=_16.substring(_17).search(/&lt;a\s*href\s*=[^&lt;]+/i); if(linkIndex==-1){ return _16; } linkIndex+=_17; charIndex=_16.indexOf("=",linkIndex); tagIndex=_16.indexOf("&gt;",linkIndex); if(charIndex!=-1&&tagIndex>charIndex){ _16=_16.substring(0,linkIndex)+"<a href"+_16.substring(charIndex,tagIndex)+" rel='external'>"+_16.substring(tagIndex+_18); return cmtUtil.processLink(_16,tagIndex+_19); } var _1a=_16.indexOf("</a>",linkIndex); if(_1a==-1){ return _16; } return cmtUtil.processLink(_16,_1a); },newWindowLinks:function(){ if(!document.getElementsByTagName){ return; } var _1b=document.getElementsByTagName("a"); for(var i=0;i<_1b.length;i++){ var _1d=_1b[i]; if(_1d.getAttribute("href")&&_1d.getAttribute("rel")=="external"){ _1d.target="_blank"; } } }}); 