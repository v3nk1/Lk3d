dojo.declare("vcc.base.frame",null,{frameSet:parent.window.document.getElementById("contentFrameset"),vccFrame:parent.window.document.getElementById("vccFrames"),rowsSetting:"24,*,250",hideRowsSetting:"24,*,22",logon:null,roleChange:new vcc.base.rolechange(),onDisplay:function(_1){ },display:function(_2){ var _3=dojo.byId("space"); var _4=dojo.byId("message"); var _5=dojo.byId("commentTip"); var _6=dojo.byId("commentsArrow"); if(this.vccFrame.noResize){ _6.src="images/plus_comment.gif"; this.frameSet.setAttribute("rows",this.hideRowsSetting); if(_3){ _3.style.display="none"; } if(_4){ _4.style.visibility="hidden"; } if(_5){ _5.style.visibility="hidden"; } this.setButtons(true); }else{ _6.src="images/minus_comment.gif"; if(!_2){ this.frameSet.setAttribute("rows",this.rowsSetting); } if(_3){ _3.style.display="block"; } if(commentView.commentAmount>0){ if(_5){ _5.style.visibility="hidden"; } if(_4){ _4.style.visibility="visible"; } }else{ if(_4){ _4.style.visibility="hidden"; } if(_5){ _5.style.visibility="visible"; } } this.setButtons(false); } if(this.onDisplay){ this.onDisplay(this.vccFrame.noResize); } },setButtons:function(_7){ var _8=document.getElementById("vccactions"); var _9=document.getElementById("localeInfo_div"); if(_7){ _8.style.display="none"; _9.style.display="none"; }else{ _8.style.display="inline"; _9.style.display="inline"; } },_isWebKit:(navigator.userAgent.indexOf("WebKit")!=-1),switchDisplay:function(){ if(this._isWebKit){ }else{ this.vccFrame.noResize=!this.vccFrame.noResize; } if(this.vccFrame.noResize){ this.rowsSetting=this.frameSet.getAttribute("rows"); } this.display(); },setDisplay:function(_a){ if(this._isWebKit){ }else{ if(_a){ this.rowsSetting=this.frameSet.getAttribute("rows"); this.vccFrame.noResize=false; }else{ this.vccFrame.noResize=true; } } this.display(); },showTermOfUseDiag:function(){ theVccFrame.rowsSetting=theVccFrame.frameSet.getAttribute("rows"); var _b=theVccFrame.rowsSetting.substring(theVccFrame.rowsSetting.lastIndexOf(",")+1); if(_b<400){ theVccFrame.frameSet.setAttribute("rows","24,*,400"); } dijit.byId("showTermofusedialog").show(); },signTerm:function(){ this.logon.logon(false); dijit.byId("termofusedialog").hide(); this.frameSet.setAttribute("rows",this.rowsSetting); },cancelTerm:function(){ alert(nlsStrings.ALERT_ACCEPT_TERM); dijit.byId("termofusedialog").hide(); this.frameSet.setAttribute("rows",this.rowsSetting); if(theVccFrame.vccFrame.noResize){ theVccFrame.rowsSetting="24,*,250"; } this.logon.enableSubmitButton(); },closeDiag:function(){ dijit.byId("showTermofusedialog").hide(); this.frameSet.setAttribute("rows",this.rowsSetting); },showAbout:function(){ theVccFrame.rowsSetting=theVccFrame.frameSet.getAttribute("rows"); var _c=theVccFrame.rowsSetting.substring(theVccFrame.rowsSetting.lastIndexOf(",")+1); if(_c<400){ theVccFrame.frameSet.setAttribute("rows","24,*,400"); } dijit.byId("aboutDlg").show(); },hideAbout:function(){ dijit.byId("aboutDlg").hide(); this.frameSet.setAttribute("rows",this.rowsSetting); },showLocaleDialog:function(){ var _d=dojo.byId("localeSwitch_button"); var _e=dijit.byId("localeDialog"); if(_d.disabled){ if(!dijit.byId("localetipDialog")){ var _f=new dijit.TooltipDialog({id:"localetipDialog",title:"Localetip"}); } _f.setContent(nlsStrings.LABEL_LOCALE_TIP); dijit.popup.open({around:_d,popup:_f}); dojo.connect(_f,"onBlur",function(){ dijit.popup.close(_f); _f.destroyRecursive(); },true); }else{ dijit.popup.open({around:_d,popup:_e}); dojo.connect(_e,"onBlur",function(){ dijit.popup.close(_e); },true); } }}); dojo.require("dijit.form.TextBox"); dojo.require("dijit.form.ValidationTextBox"); dojo.require("dojo.data.ItemFileReadStore"); dojo.require("dijit.form.Button"); dojo.require("dijit.Menu"); dojo.require("dijit.Tooltip"); dojo.require("dijit.Dialog"); dojo.require("dijit.Toolbar"); dojo.require("dijit.form.ComboBox"); dojo.require("dijit.form.CheckBox"); dojo.require("dijit.form.FilteringSelect"); dojo.require("dijit.layout.BorderContainer"); dojo.require("dijit.layout.ContentPane"); dojo.declare("vcc.Dialog",dijit.Dialog,{refocus:false,_position:function(){ if(dojo.hasClass(dojo.body(),"dojoMove")){ return; } var _10=dijit.getViewport(); var mb=dojo.marginBox(this.domNode); this.closeButtonNode.style.display="none"; var _12=this.domNode.style; if(_10.h>mb.h){ _12.left=Math.floor((_10.l+(_10.w-mb.w)/2))+"px"; _12.top=Math.floor((_10.t+(_10.h-mb.h)/2))+"px"; }else{ } }}); var vccUtils=new vcc.base.Utils(); var theVccFrame=new vcc.base.frame(); var vccFrameloaders=new Array(); var vccFrameUnloaders=new Array(); var vccFrameLoaded=false; var vccFrameRefreshed=false; function reset(){ vccFrameRefreshed=false; for(var i=0;i<vccFrameUnloaders.length;++i){ try{ vccFrameUnloaders[i](); } catch(e){ } } }; dojo.addOnLoad(function(){ loadVccFrame(); }); function loadVccFrame(){ if(vccFrameRefreshed){ return; }else{ vccFrameRefreshed=true; } for(var i=0;i<vccFrameloaders.length;++i){ if(!vccFrameloaders[i]()){ vccFrameRefreshed=false; setTimeout(loadVccFrame,2000); return; } } dojo.byId("loading").style.display="none"; dijit.setWaiRole(dojo.body(),"application"); dijit.Tooltip.defaultPosition=["above","below"]; vccFrameLoaded=true; checkAddCommentAfterLogon(); }; function checkAddCommentAfterLogon(){ var _15=dojo.cookie("AddCommentAfterLogon"); if(_15&&_15=="yes"){ if(!commentView.commentsRetrieved){ setTimeout(checkAddCommentAfterLogon,1000); }else{ dojo.cookie("AddCommentAfterLogon",null,{expires:-1}); pid=0; if(userRight.test(AU.MASK.ADDCOMMENT)){ commentDlg.show("new","",pid); } } } var _16=dojo.cookie("AddReplyAfterLogon"); if(_16){ if(!commentView.commentsRetrieved){ setTimeout(checkAddCommentAfterLogon,1000); }else{ if(userRight.test(AU.MASK.ADDCOMMENT)){ var _17=dojo.fromJson(_16); var _18=commentContent.createSelection(decodeURIComponent(_17.htmlID)); commentContent.selectFragment(_18); commentDlg.show("reply",nlsStrings.LABEL_RE_PREFIX+_17.subject,_17.pid); } dojo.cookie("AddReplyAfterLogon",null,{expires:-1}); } } }; window.top.VCCSubject.registerLogonObserver(new window.top.IObserver(function(){ var url=window.location.href; var _1a=url.indexOf("resetrows"); if(_1a>0){ url=url.substring(0,_1a); } window.location.replace(url); })); 