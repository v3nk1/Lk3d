dojo.declare("vcc.comment.CommentTableView",vcc.comment.CommentFrameView,{commentDisplay:new vcc.comment.CommentDisplay(),_commentTrees:[],showLoadingMsg:function(){ },insertComment:function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){ if(!_c){ _c=false; } var _d=new vcc.comment.Comment(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b); if(_c){ var _e=this._commentTrees[_b.asString()]; if(_e){ _e._insertComment(_d); }else{ _e=new vcc.comment.CommentTree(); _e._insertComment(_d); this._commentTrees[_b.asString()]=_e; } }else{ this.commentDisplay.addComment(_d); } ++(this.commentAmount); },reset:function(){ this.inherited(arguments); for(var i in this._commentTrees){ this._commentTrees[i].reset(); } var _10=document.getElementById("comment_dis_table"); var _11=_10.childNodes; for(var i=_11.length-1;i>=0;--i){ if(_11[i].tagName=="TBODY"&&_11[i].id!="comment_table_body"){ _10.removeChild(_11[i]); } } this.commentDisplay.refresh_comment_table(); },updateUI:function(){ this.inherited(arguments); var _12=document.getElementById("comment_dis_table"); this.showCommentTip(true); if(isMozilla){ _12.style.display="table"; }else{ if(isIE){ _12.style.display="block"; } } var _13=document.getElementById("comment_table_body"); var _14=document.getElementById("comment_dis_table"); var _15=_14.getElementsByTagName("tbody"); var _16=[]; for(var _17=0;_17<_15.length;_17++){ if(_15[_17].className){ _16[_17]=_15[_17]; } } for(var _17 in _16){ _14.removeChild(_16[_17]); } this.commentDisplay.initTree(this._commentTrees); },getCommentedHtmlIDs:function(){ var _18=[]; for(var i in this.commentDisplay.commentTrees){ var _1a=this.commentDisplay.commentTrees[i].htmlID; var id=_1a.target; var _1c=false; for(var j in _18){ if(_18[j].equals(id)){ _1c=true; break; } } if(!_1c){ _18[_18.length]=_1a; } } return _18; },showCommentsForSelection:function(_1e){ if(_1e){ var _1f=dijit.byId("addcomment_btn"); if(_1f&&_1e.type=="page"){ _1f.setLabel(nlsStrings.LABEL_COMMENT_ON_TOPIC); }else{ if(_1f&&_1e.type=="element"){ _1f.setLabel(nlsStrings.LABEL_COMMENT_ON_ELEMENT); }else{ if(_1f&&_1e.type=="free"){ _1f.setLabel(nlsStrings.LABEL_COMMENT_ON_SELECTION); } } } this.commentDisplay.highlightThreadsByElementID(_1e); } },hasChildComment:function(_20){ for(var _21 in this._commentTrees){ var _22=this._commentTrees[_21]; var _23=_22.hasChildNodes(_20); if(_23){ return true; } } return false; },findCommentByID:function(_24){ for(var _25 in this._commentTrees){ var _26=this._commentTrees[_25]; var _27=_26.getCommentById(_24); if(_27!=null){ return _27; } } return null; }}); 