var selectedNode; var highlightSelectedNode; function updateTree(_1){ var _2=_1.documentElement; if(_2.tagName!="tree_data"){ return; } showErrors(_1); var _3=document.getElementById("tree_root"); var _4=_2.childNodes; selectedNode=null; mergeChildren(_3,_4); if(selectedNode!=null){ if(!highlightSelectedNode){ focusOnDeepestVisibleChild(selectedNode,false); } focusOnItem(selectedNode,highlightSelectedNode); } }; function showErrors(_5){ var _6=_5.getElementsByTagName("error"); for(var i=0;i<_6.length;i++){ var _8=_6[i]; var _9=_8.childNodes; if(_9.length>0&&_9[0].nodeType==3){ var _a=_9[0].data; alert(_a); } } return _6.length>0; }; function mergeChildren(_b,_c){ var _d; if(_b.id=="tree_root"){ _d=_b; }else{ _d=findChild(_b,"DIV"); } var _e=false; var _f=_d!=null&&_d.className=="unopened"; if(_c){ for(var i=0;i<_c.length;i++){ var _11=_c[i]; if(_11.tagName=="node"){ if(_f){ _b.removeChild(_d); _f=false; _d=null; } if(_d===null){ _d=document.createElement("DIV"); _d.className="group"; setAccessibilityRole(_d,WAI_GROUP); _b.appendChild(_d); } var _12=_11.getAttribute("title"); var _13=_11.getAttribute("is_leaf"); var _14=_11.getAttribute("href"); var _15=_11.getAttribute("image"); var id=_11.getAttribute("id"); var _17=_11.getAttribute("tocID"); var _18=_11.getAttribute("topicID"); if(_17!=null){ id=id+"tocID="+_17; }else{ id=id+"topicID="+_18; } var _19=mergeChild(_d,id,_12,_14,_15,_13); var _1a=_11.getAttribute("is_selected"); if(!_13){ mergeChildren(_19,_11.childNodes); } if(_1a){ selectedNode=_19; highlightSelectedNode=_11.getAttribute("is_highlighted"); } _e=true; } } } if(_e){ var _1b=getChildClass(_b); if(_1b=="hidden"){ toggleExpandState(_b); }else{ changeExpanderImage(_b,true); setWAIExpansionState(_b,true); } } }; function mergeChild(_1c,id,_1e,_1f,_20,_21){ var _22=id.indexOf("tocID="); var _23=id.indexOf("topicID="); var _24; var _25; if(_22!=-1){ _24=id.substring(_22+6); id=id.substring(0,_22); }else{ if(_23!=-1){ _25=id.substring(_23+8); id=id.substring(0,_23); } } var _26=_1c.childNodes; if(_26!==null){ for(var i=0;i<_26.length;i++){ if(_26[i].nodeid==id){ return _26[i]; } } } var _28=document.createElement("DIV"); if(_1c.id=="tree_root"){ _28.className="root"; }else{ _28.className="visible"; } _28.nodeid=id; _1c.appendChild(_28); var _29=document.createElement("SPAN"); _29.className="item"; _28.appendChild(_29); var _2a; if(_20){ _2a=document.createElement("IMG"); setImage(_2a,_20); } var _2b=document.createTextNode(_1e); if(showExpanders){ var _2c=document.createElement("IMG"); _2c.className="expander"; setImage(_2c,"plus"); if(_21){ _2c.className="h"; _2c.alt=""; } _29.appendChild(_2c); } var _2d=document.createElement("a"); if(_1f===null){ _2d.className="nolink"; }else{ _2d.href=_1f; } _2d.title=_1e; if(id.indexOf(".xml")!=-1){ _2d.id=id; _2d.name=_24; }else{ _2d.id=_25; } setAccessibilityRole(_2d,WAI_TREEITEM); if(_2a){ _2d.appendChild(_2a); } _2d.appendChild(_2b); _29.appendChild(_2d); if(!_21){ var _2e=document.createElement("DIV"); _2e.className="unopened"; setWAIExpansionState(_2d,false); _28.appendChild(_2e); } return _28; }; function setLoadingMessage(_2f,_30){ var _31=findChild(_2f,"DIV"); if(_31!==null&&_31.childNodes.length==0){ var msg=document.createTextNode(_30); _31.appendChild(msg); } }; 