var oldActive; var oldActiveClass; var WAI_TREEITEM="wairole:treeitem"; var WAI_TREE="wairole:tree"; var WAI_GROUP="wairole:group"; var WAI_APPLICATION="wairole:application"; function getActiveAnchor(){ return oldActive; }; function treeMouseClickHandler(e){ var _2=getEventTarget(e); if(!_2){ return; } if(_2.className=="expander"){ toggleExpandState(_2); cancelEventBubble(e); }else{ if(_2.tagName=="A"||_2.tagName=="IMG"){ var _3=getTreeItem(_2); if(_3!==null){ highlightItem(getTreeItem(_2),true); } } } }; function treeMouseDblClickHandler(e){ var _5=getEventTarget(e); if(_5.className=="expander"||_5.tagName=="A"||_5.tagName=="IMG"){ toggleExpandState(_5); cancelEventBubble(e); } }; function rightClickHandler(e){ var _7=window.event||e; cancelEventBubble(_7); if(_7.button!=2){ return true; } var _8=getEventTarget(_7); if(!_8){ return; } var _9=getTreeItem(_8); var _a=getChildClass(_9); if(_a=="visible"){ goLeft(_9); } if(_a=="hidden"||_a=="unopened"){ goRight(_9); } return false; }; function treeKeyDownHandler(e){ var _c=getKeycode(e); cancelEventBubble(e); var _d=getEventTarget(e); var _e=getTreeItem(_d); if(_c==79){ var _f=getChildClass(_e); if(_f=="hidden"||_f=="unopened"){ goRight(_e); return false; } return true; } if(_c==66){ var _f=getChildClass(_e); if(_f=="visible"){ goLeft(_e); return false; } return true; } if(_c<35||_c>40){ if(isInternetExplorer){ return true; }else{ if(_c==9){ var _d=getEventTarget(e); if(!_d){ return; } tabIndexByFireFox(_d); return true; } if(_c==13){ treeMouseClickHandler(e); var _d=getEventTarget(e); parent.parent.parent.parent.ContentFrame.ContentViewFrame.window.location.href=_d["href"]; } } return true; } if(_c==35){ goToEnd(); }else{ if(_c==36){ goHome(); } } var _d=getEventTarget(e); var _e=getTreeItem(_d); if(!_e&&_c>=37){ return true; } if(_c==37){ goLeft(_e); }else{ if(_c==38){ goUp(_e); } } if(_c==39){ goRight(_e); }else{ if(_c==40){ goDown(_e); } } return false; }; function goHome(){ var _10=document.getElementById("tree_root"); if(_10===null){ return; } focusOnItem(findChild(_10,"DIV"),false); }; function goToEnd(){ var _11=document.getElementById("tree_root"); if(_11===null){ return; } focusOnDeepestVisibleChild(_11.parentNode,false); }; function goLeft(_12){ var _13=getChildClass(_12); if(_13=="visible"&&showExpanders){ toggleExpandState(_12); }else{ focusOnItem(getTreeItem(_12.parentNode),false); } }; function goRight(_14){ var _15=getChildClass(_14); if(_15=="hidden"||_15=="unopened"){ toggleExpandState(_14); return; } focusOnItem(findChild(findChild(_14,"DIV"),"DIV"),false); }; function goUp(_16){ for(var _17=_16.previousSibling;_17!==null;_17=_17.previousSibling){ if(_17.tagName=="DIV"){ focusOnDeepestVisibleChild(_17,false); return; } } focusOnItem(getTreeItem(_16.parentNode),false); }; function goDown(_18){ var _19=getChildClass(_18); if(_19=="visible"){ focusOnItem(findChild(findChild(_18,"DIV"),"DIV"),false); return; } for(var _1a=_18;_1a!==null;_1a=getTreeItem(_1a.parentNode)){ for(var _1b=_1a.nextSibling;_1b!==null;_1b=_1b.nextSibling){ if(_1b.tagName=="DIV"){ focusOnItem(_1b,false); return; } } } }; function focusOnDeepestVisibleChild(_1c,_1d){ var _1e=findChild(_1c,"DIV"); if(_1e){ var _1f=findLastChild(_1e,"DIV"); if(_1f){ if(_1f.className=="visible"||_1f.className=="root"){ focusOnDeepestVisibleChild(_1f,_1d); return; } } } focusOnItem(_1c,_1d); }; function findAnchor(_20){ if(_20===null){ return null; } var _21=findChild(_20,"SPAN"); if(!_21){ return _20; } return findChild(_21,"A"); }; function focusOnItem(_22,_23){ makeVisible(_22); var _24=findAnchor(_22); if(_24){ _24.focus(); if(_23){ highlightItem(_22); } var _25=getExpander(_22); if(_25!==null){ scrollUntilVisible(_24.parentNode,SCROLL_HORIZONTAL_AND_VERTICAL); }else{ scrollUntilVisible(_24,SCROLL_HORIZONTAL_AND_VERTICAL); } } }; function highlightItem(_26){ var _27=findAnchor(_26); if(_27){ if(oldActive){ oldActive.className=oldActiveClass; } oldActive=_27; oldActiveClass=_27.className; _27.className="active"; } }; function makeVisible(_28){ if(!_28){ return; } var _29=getTreeItem(_28.parentNode); if(!_29){ return; } if(_29.className!="root"){ makeVisible(_29); } var _2a=getChildClass(_29); if(_2a=="hidden"){ toggleExpandState(_29); } }; function getTreeItem(_2b){ if(_2b===null){ return null; } for(var _2c=_2b;_2c!==null;_2c=_2c.parentNode){ if(_2c.tagName=="DIV"){ var _2d=_2c.className; if(_2d=="visible"||_2d=="hidden"||_2d=="unopened"||_2d=="root"){ return _2c; } } } return null; }; function getTopAncestor(_2e){ var _2f=_2e; var _30=_2f; while(_30!==null&&_30.className!="root"){ _2f=_30; _30=getTreeItem(_2f.parentNode); if(_30.className=="root"){ return _30; } } return _2f; }; function getChildClass(_31){ var _32=findChild(_31,"DIV"); if(_32&&_32.className=="group"){ _32=findChild(_32,"DIV"); } if(_32){ return _32.className; } return "leaf"; }; function getIcon(_33){ var _34=findAnchor(_33); if(_34){ return findChild(_34,"IMG"); } return null; }; function findChild(_35,tag){ if(_35===null){ return null; } var _37=_35.childNodes; for(var i=0;i<_37.length;i++){ if(tag==_37[i].tagName){ return _37[i]; } } return null; }; function findLastChild(_39,tag){ if(_39===null){ return null; } var _3b=_39.childNodes; for(var i=_3b.length-1;i>=0;i--){ if(tag==_3b[i].tagName){ return _3b[i]; } } return null; }; function getExpander(_3d){ var _3e=findChild(_3d,"SPAN"); if(!_3e){ _3e=_3d; } var _3f=_3e.childNodes; var _40=false; for(var i=0;i<_3f.length&&!_40;i++){ if(_3f[i].className=="expander"){ return _3f[i]; } } return null; }; function toggleExpandState(_42){ var _43=getTreeItem(_42); if(!_43){ return; } var _44=getChildClass(_43); var _45; if(_44=="unopened"){ _45="visible"; loadChildren(_43); }else{ if(_44=="hidden"){ _45="visible"; }else{ if(_44=="visible"){ _45="hidden"; }else{ return; } } } if(_44!="unopened"){ var _46=findChild(_43,"DIV"); if(_46&&_46.className=="group"){ var _47=_46.childNodes; for(var i=0;i<_47.length;i++){ if("DIV"==_47[i].tagName){ _47[i].className=_45; } } } changeExpanderImage(_43,_45=="visible"); } setWAIExpansionState(_43,_45=="visible"); if(_45=="visible"){ scrollUntilVisible(_43,SCROLL_HORIZONTAL_AND_VERTICAL); } }; function changeExpanderImage(_49,_4a){ var _4b=getIcon(_49); var _4c=getExpander(_49); if(_4c){ if(_4a){ setImage(_4c,"minus"); }else{ setImage(_4c,"plus"); } } if(_4b){ updateImage(_4b,_4a); } }; var isNamespaceSupport=typeof document.documentElement.setAttributeNS!="undefined"; function setAccessibilityRole(_4d,_4e){ if(isNamespaceSupport){ _4d.setAttributeNS("http://www.w3.org/TR/xhtml2","role",_4e); _4d.role=_4e; } }; function setWAIExpanded(_4f,_50){ if(isNamespaceSupport){ var _51=_50?"true":"false"; _4f.setAttributeNS("http://www.w3.org/2005/07/aaa","expanded",_51); } }; function setRootAccessibility(){ if(isNamespaceSupport){ var _52=document.getElementById("tree_root"); if(_52){ setAccessibilityRole(_52,WAI_TREE); } var _53=document.getElementById("wai_application"); if(_53){ setAccessibilityRole(_53,WAI_APPLICATION); } } }; function setWAIExpansionState(_54,_55){ if(isNamespaceSupport){ var _56=findAnchor(_54); if(_56){ setWAIExpanded(_56,_55); } } }; function tabIndexByFireFox(_57){ if(!_57){ return; } var _58=_57; if(_57.tagName=="HTML"){ var _59=_57.lastChild; _58=findChild(_59,"DIV"); if(!_58){ return; } _58=findChild(findChild(_58,"DIV"),"DIV"); var _5a=findChild(findChild(_58,"SPAN"),"A"); if(_5a){ _5a.focus(); } return; }else{ _58=_58.parentNode.parentNode; } goDown(_58); return; }; 