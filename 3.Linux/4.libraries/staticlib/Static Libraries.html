<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><title>Static Libraries</title><meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7"><link rel="HOME" title="Program Library HOWTO" href="http://tldp.org/HOWTO/Program-Library-HOWTO/index.html"><link rel="PREVIOUS" title="Introduction" href="http://tldp.org/HOWTO/Program-Library-HOWTO/introduction.html"><link rel="NEXT" title="Shared Libraries" href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html"></head><body class="SECT1" text="#000000" vlink="#840084" alink="#0000FF" bgcolor="#FFFFFF" link="#0000FF"><div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><th colspan="3" align="center">Program Library HOWTO</th></tr><tr><td valign="bottom" width="10%" align="left"><a href="http://tldp.org/HOWTO/Program-Library-HOWTO/introduction.html" accesskey="P">Prev</a></td><td valign="bottom" width="80%" align="center"></td><td valign="bottom" width="10%" align="right"><a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html" accesskey="N">Next</a></td></tr></tbody></table><hr width="100%" align="LEFT"></div><div class="SECT1"><h1 class="SECT1"><a name="STATIC-LIBRARIES"></a>2. Static Libraries</h1><p>Static libraries are simply a collection of ordinary object files;
conventionally, static libraries end with the ``.a'' suffix.
This collection is created using the ar (archiver) program.
Static libraries aren't used as often as they once were, because of the
advantages of shared libraries (described below).
Still, they're sometimes created, they existed first historically,
and they're simpler to explain.</p><p>Static libraries permit users to link to programs without having to
recompile its code, saving recompilation time.
Note that recompilation time is less important given today's faster compilers,
so this reason is not as strong as it once was.
Static libraries are often useful for developers if they wish to
permit programmers to link to their library, but don't want to give
the library source code (which is an advantage to the library vendor, but
obviously not an advantage to the programmer trying to use the library).
In theory, code in static ELF libraries that is linked into an
executable should run slightly faster (by 1-5%) than a shared library
or a dynamically loaded library, but in practice this
rarely seems to be the case due to other confounding factors.</p><p>To create a static library, or to add additional object files to
an existing static library, use a command like this:</p><table width="100%" bgcolor="#E0E0E0" border="0"><tbody><tr><td><font color="#000000"><pre class="PROGRAMLISTING">ar rcs my_library.a file1.o file2.o</pre></font></td></tr></tbody></table><p>This sample command adds the object files file1.o and file2.o to the
static library my_library.a, creating my_library.a if it doesn't
already exist.
For more information on creating static libraries, see ar(1).</p><p>Once you've created a static library, you'll want to use it.
You can use a static library by invoking it as part of the compilation
and linking process when creating a program executable.
If you're using gcc(1) to generate your executable, you can use the -l
option to specify the library; see info:gcc for more information.</p><p>Be careful about the order of the parameters when using gcc;
the -l option is a linker option, and thus needs to be placed
AFTER the name of the file to be compiled.
This is quite different from the normal option syntax.
If you place the -l option before the filename, it may fail to link at all,
and you can end up with mysterious errors.</p><p>You can also use the linker ld(1) directly, using its -l and -L options;
however, in most cases it's better to use gcc(1) since the interface of
ld(1) is more likely to change.</p></div><div class="NAVFOOTER"><hr width="100%" align="LEFT"><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td valign="top" width="33%" align="left"><a href="http://tldp.org/HOWTO/Program-Library-HOWTO/introduction.html" accesskey="P">Prev</a></td><td valign="top" width="34%" align="center"><a href="http://tldp.org/HOWTO/Program-Library-HOWTO/index.html" accesskey="H">Home</a></td><td valign="top" width="33%" align="right"><a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html" accesskey="N">Next</a></td></tr><tr><td valign="top" width="33%" align="left">Introduction</td><td valign="top" width="34%" align="center">&nbsp;</td><td valign="top" width="33%" align="right">Shared Libraries</td></tr></tbody></table></div></body></html>